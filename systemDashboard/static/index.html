<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="Company" content="Almende BV">
    <meta name="Author" content="Luis F. M. Cunha">
    <title>System Dashboard</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="vendor/bootstrap4/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="vendor/jquery/jquery-3.3.1.min.js"></script>
    <!-- Popper JS -->
    <script src="vendor/pooper/popper.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="vendor/bootstrap4/bootstrap.min.js"></script>

    <script src="./vendor/visjs/vis.js"></script>
    <link href="./vendor/visjs/vis-timeline-graph2d.min.css" rel="stylesheet" type="text/css" />

    <!-- my Styles -->
    <link rel="stylesheet" href="./css/myStyles.css">

</head>
<body>
    <div class="boxBody">

        <div class="rowBody headerBody">
            <nav class="navbar navbar-expand-sm bg-light navbar-light shadow-sm">
                <!-- Brand/logo -->
                <a class="navbar-brand " href="http://localhost"><img id="imageLogo" src="img/vf-OS_logo_01.png" alt="Logo"></a>

                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="http://localhost">Portal</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="http://localhost/systemdashboard/index.html">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="http://vf-os.eu" target="_blank">About</a>
                    </li>
                </ul>



                <!-- Navbar text-->

            </nav>
        </div>

        <div class="rowBody contentBody">
            <div class="container-fluid">
                <div class="row" >
                    <div id="tableDiv" class="col-sm-12">

                        <div id="runningContainers"class="border shadow p-2 mb-2 bg-white">
                            <h5>Running containers</h5>
                            <div class="table-responsive-xl">
                                <table id="runningTableContainers" class="table table-hover table-light table-sm">
                                    <thead class="thead-light">
                                    <tr>
                                        <th class="align-middle">CONTAINER ID</th>
                                        <th class="align-middle">NAME</th>
                                        <th class="align-middle">CPU %</th>
                                        <th class="align-middle">MEM USAGE / LIMIT</th>
                                        <th class="align-middle">MEM %</th>
                                        <th class="align-middle">NET I/O</th>
                                        <th class="align-middle">BLOCK I/O</th>
                                        <th class="align-middle">PIDS</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td colspan="8">
                                            <div class="progress">
                                                <div id="progressBar" class="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                            </div>
                                        </td>
                                    </tr>
                                    <!--
                                    <tr>
                                        <td>dc745c7a6318</td>
                                        <td>test-platform_reverse-proxy_2</td>
                                        <td>0.03%</td>
                                        <td>10.5MiB / 15.54GiB</td>
                                        <td>0.07%</td>
                                        <td>162kB / 0B</td>
                                        <td>209kB / 0B</td>
                                        <td>17</td>
                                    </tr>
                                    -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div id="detailsDiv" class="border shadow p-2 mb-2 bg-white" style="display: none">

                        <div>
                            <!-- Button to close details view src="js/containerDetails.js"-->
                            <button id="closeDetailsButton" type="button" class="btn btn-light border" onclick="toggleTableContent()">&times;</button>

                            <!-- Nav pills -->
                            <ul class="nav nav-tabs" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#containerDetails_app">App</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#containerDetails_stats">Stats</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#containerDetails_logs">Logs</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#containerDetails_settings">Settings</a>
                                </li>
                            </ul>
                        </div>

                        <!-- Tab panes -->
                        <div class="tab-content">
                            <!-- Tab containerDetails_app -->
                            <div id="containerDetails_app" class="tab-pane active">
                                <iframe id="app_iframe" src="apps/appRadar/index.html">
                                    <p>Your browser does not support iframes.</p>
                                </iframe>
                            </div>

                            <!-- Tab containerDetails_stats -->
                            <div id="containerDetails_stats" class="tab-pane fade">

                                <div class="container-fluid d-flex justify-content-between">
                                    <div class="mr-auto"><h6>CPU</h6></div>

                                    <form class="form-inline">
                                        <label for="strategyCpu">Strategy:</label>
                                        <select id="strategyCpu" class="form-control custom-select custom-select-sm">
                                            <option value="discrete">Discrete</option>
                                            <option value="static" selected>Static</option>
                                        </select>
                                    </form>
                                </div>
                                <div id="visualizationCpu" ></div>

                                <br>
                                <div class="container-fluid d-flex justify-content-between">
                                    <div class="mr-auto"><h6>Memory percentage</h6></div>
                                    <form class="form-inline">
                                        <label for="strategyMemPerc">Strategy:</label>
                                        <select id="strategyMemPerc" class="form-control custom-select custom-select-sm">
                                            <option value="discrete">Discrete</option>
                                            <option value="static" selected>Static</option>
                                        </select>
                                    </form>
                                </div>
                                <div id="visualizationMemPerc" ></div>

                                <br>
                                <div class="container-fluid d-flex justify-content-between">
                                    <div class="mr-auto"><h6>Memory usage</h6></div>
                                    <form class="form-inline">
                                        <label for="strategyMemUsage">Strategy:</label>
                                        <select id="strategyMemUsage" class="form-control custom-select custom-select-sm">
                                            <option value="discrete">Discrete</option>
                                            <option value="static" selected>Static</option>
                                        </select>
                                    </form>
                                </div>
                                <div id="visualizationMemUsage" ></div>

                                <br>
                                <div class="container-fluid d-flex justify-content-between">
                                    <div class="mr-auto"><h6>Net I/O</h6></div>
                                    <form class="form-inline">
                                        <label for="strategyNetIO">Strategy:</label>
                                        <select id="strategyNetIO" class="form-control custom-select custom-select-sm">
                                            <option value="discrete">Discrete</option>
                                            <option value="static" selected>Static</option>
                                        </select>
                                    </form>
                                </div>
                                <div id="visualizationNetIO" ></div>

                                <br>
                                <div class="container-fluid d-flex justify-content-between">
                                    <div class="mr-auto"><h6>Block I/O</h6></div>
                                    <form class="form-inline">
                                        <label for="strategyBlockIO">Strategy:</label>
                                        <select id="strategyBlockIO" class="form-control custom-select custom-select-sm">
                                            <option value="discrete">Discrete</option>
                                            <option value="static" selected>Static</option>
                                        </select>
                                    </form>
                                </div>
                                <div id="visualizationBlockIO" ></div>

                            </div>

                            <!-- Tab containerDetails_logs -->
                            <div id="containerDetails_logs" class="tab-pane fade"></div>

                            <!-- Tab containerDetails_settings -->
                            <div id="containerDetails_settings" class="tab-pane fade"></div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div class="rowBody footerBody">
            <div class="container-fluid text-center bg-light">
                <small>Copyright © vf-OS 2018</small>
            </div>
        </div>
    </div>


    <script>

        var progressBarValue = 0;

        $(document).ready(function(){
/*
            //var $alert = $('.alert');
            var $progressBar = $('#progressBar');

            var progress = 0;      // initial value of your progress bar
            var timeout = 10;      // number of milliseconds between each frame
            var increment = .5;    // increment for each frame
            var maxprogress = 110; // when to leave stop running the animation

            function animate() {
                setTimeout(function () {

                    if($("#progressBar").length !== 0){
                        progress += increment;
                        if(progress < maxprogress) {
                            $progressBar.attr('value', progress);
                            animate();
                        } else {
                            //$progressBar.css('display', 'none');
                            //$alert.css('display', 'block');
                        }
                    }

                }, timeout);
            };
            animate();
*/
            //var $alert = $('.alert');
            var $progressBar = $('#progressBar');

            var progress = 0;      // initial value of your progress bar
            var timeout = 200;      // number of milliseconds between each frame
            var increment = 10;    // increment for each frame
            var maxprogress = 110; // when to leave stop running the animation

            function animate() {
                setTimeout(function () {

                    if($("#progressBar").length !== 0){
                        progress += increment;
                        if(progress < maxprogress) {
                            //$progressBar.attr('value', progress);
                            $progressBar.attr('aria-valuenow', progress);
                            $progressBar.width(progress + "%");
                            //$progressBar.text(progress + "%");
                            animate();
                        }
                    }

                }, timeout);
            };
            animate();


            /*
            var percentage = 20;
            $("#progressbar").animate(
                {
                    "value": percentage + "%"
                },
                {
                    duration: 600,
                    easing: 'linear'
                }
            );
            */

            // update stats history
            //progressBar_timer = setInterval(updateProgressBar, 500);

        });
        
        function updateProgressBar() {

            progressBarValue+=25;
            if(progressBarValue >= 100){
                progressBarValue = 100;
                clearInterval(progressBar_timer);
            }

            $("#progressBar").attr("width", progressBarValue + "%");
            $("#progressBar").attr("aria-valuenow", progressBarValue);

        }
        
    </script>
    
    <script src="js/updateStatsHistory.js"></script>

    <script src="js/containerDetails_stats.js"></script>

    <script src="js/loadModules.js"></script>


</body>
</html>